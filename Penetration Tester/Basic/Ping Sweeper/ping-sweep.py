"""
file: ping-sweep.py
language: python3
author: Jacob Brown jmb7438@rit.edu
description: Ping sweep a given IP address range
"""
import sys
import ipaddress
from pythonping import ping


def ping_hosts(start_ip, end_ip):
    start_ip = ipaddress.IPv4Address(start_ip)
    end_ip = ipaddress.IPv4Address(end_ip)
    
    for ip_int in range(int(start_ip), int(end_ip)+1):
        curr_ip_str = str(ipaddress.IPv4Address(ip_int))
        response_list = ping(curr_ip_str, count=1)
        for response in response_list:
            if response.success:
                print(curr_ip_str + " is up")
            else:
                print(curr_ip_str + " is down")
    

def main():
    if len(sys.argv) != 3:
        print("Usage: python ping-sweep.py <start-ip> <end-ip>")
        exit(1)

    start_ip = sys.argv[1]
    end_ip = sys.argv[2]

    ping_hosts(start_ip, end_ip)
    

main()
